# [0019. breakã€continue](https://github.com/tnotesjs/TNotes.c-cpp/tree/main/notes/0019.%20break%E3%80%81continue)

<!-- region:toc -->

- [1. ğŸ¯ æœ¬èŠ‚å†…å®¹](#1--æœ¬èŠ‚å†…å®¹)
- [2. ğŸ«§ è¯„ä»·](#2--è¯„ä»·)
- [3. ğŸ¤” break è¯­å¥çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿå®ƒåœ¨å“ªäº›ç»“æ„ä¸­æœ‰æ•ˆï¼Ÿ](#3--break-è¯­å¥çš„ä½œç”¨æ˜¯ä»€ä¹ˆå®ƒåœ¨å“ªäº›ç»“æ„ä¸­æœ‰æ•ˆ)
- [4. ğŸ¤” continue è¯­å¥çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿå®ƒå¦‚ä½•å½±å“å¾ªç¯æ‰§è¡Œï¼Ÿ](#4--continue-è¯­å¥çš„ä½œç”¨æ˜¯ä»€ä¹ˆå®ƒå¦‚ä½•å½±å“å¾ªç¯æ‰§è¡Œ)
- [5. ğŸ†š break vs continueï¼šè¡Œä¸ºå’Œä½¿ç”¨åœºæ™¯æœ‰ä½•æœ¬è´¨åŒºåˆ«ï¼Ÿ](#5--break-vs-continueè¡Œä¸ºå’Œä½¿ç”¨åœºæ™¯æœ‰ä½•æœ¬è´¨åŒºåˆ«)
- [6. ğŸ¤” åœ¨åµŒå¥—å¾ªç¯ä¸­ï¼Œbreak å’Œ continue ä¼šä½œç”¨äºå“ªä¸€å±‚ï¼Ÿ](#6--åœ¨åµŒå¥—å¾ªç¯ä¸­break-å’Œ-continue-ä¼šä½œç”¨äºå“ªä¸€å±‚)
- [7. ğŸ¤” å¦‚ä½•è·³å‡ºå¤šå±‚åµŒå¥—å¾ªç¯ï¼Ÿæœ‰å“ªäº›æ›¿ä»£æ–¹æ¡ˆï¼Ÿ](#7--å¦‚ä½•è·³å‡ºå¤šå±‚åµŒå¥—å¾ªç¯æœ‰å“ªäº›æ›¿ä»£æ–¹æ¡ˆ)
- [8. ğŸ¤” åœ¨ switch è¯­å¥ä¸­ä½¿ç”¨ break çš„å¿…è¦æ€§æ˜¯ä»€ä¹ˆï¼Ÿ](#8--åœ¨-switch-è¯­å¥ä¸­ä½¿ç”¨-break-çš„å¿…è¦æ€§æ˜¯ä»€ä¹ˆ)
- [9. ğŸ¤” æ»¥ç”¨ break æˆ– continue ä¼šå¯¼è‡´ä»€ä¹ˆé—®é¢˜ï¼Ÿ](#9--æ»¥ç”¨-break-æˆ–-continue-ä¼šå¯¼è‡´ä»€ä¹ˆé—®é¢˜)
- [10. ğŸ”— å¼•ç”¨](#10--å¼•ç”¨)

<!-- endregion:toc -->

## 1. ğŸ¯ æœ¬èŠ‚å†…å®¹

- `break` çš„è¯­ä¹‰ä¸ç”Ÿæ•ˆèŒƒå›´
- `continue` çš„è¯­ä¹‰ä¸æ§åˆ¶æµå˜åŒ–
- `break` ä¸ `continue` çš„å…³é”®åŒºåˆ«
- åµŒå¥—å¾ªç¯ä¸­çš„ä½œç”¨å±‚çº§
- è·³å‡ºå¤šå±‚å¾ªç¯çš„å¸¸è§å†™æ³•
- `switch` ä¸­ `break` ä¸ç©¿é€
- å¯è¯»æ€§ä¸å¯ç»´æŠ¤æ€§çš„å¸¸è§å‘

## 2. ğŸ«§ è¯„ä»·

- `break`ã€`continue` æ˜¯å¾ˆå¼ºçš„æ§åˆ¶æµå·¥å…·ï¼Œç”¨å¾—å¥½èƒ½å‡å°‘ç¼©è¿›ï¼Œç”¨å¾—ä¸å¥½ä¼šæŠŠå¾ªç¯å˜æˆè¿·å®«ã€‚
- ç»éªŒä¸Šæ›´æ¨èç”¨æ¸…æ™°çš„å¾ªç¯æ¡ä»¶è¡¨è¾¾é€€å‡ºé€»è¾‘ï¼Œ`break` ç”¨äºå°‘æ•°â€œæå‰é€€å‡ºâ€çš„å¼‚å¸¸è·¯å¾„ï¼Œ`continue` ç”¨äºæ—©è¿”å›å¼çš„è¿‡æ»¤é€»è¾‘ã€‚
- ä¸€æ—¦å‡ºç°ä¸¤å±‚ä»¥ä¸ŠåµŒå¥—å¹¶é¢‘ç¹ `break`ï¼Œé€šå¸¸æ„å‘³ç€å¯ä»¥æ‹†å‡½æ•°æˆ–é‡æ„æ•°æ®ç»“æ„ã€‚

## 3. ğŸ¤” break è¯­å¥çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿå®ƒåœ¨å“ªäº›ç»“æ„ä¸­æœ‰æ•ˆï¼Ÿ

`break` çš„ä½œç”¨æ˜¯ç«‹å³ç»“æŸå½“å‰çš„ `switch` æˆ–å½“å‰è¿™ä¸€å±‚å¾ªç¯ï¼ˆ`for`ã€`while`ã€`do-while`ï¼‰ï¼Œå¹¶æŠŠæ§åˆ¶æµç§»åŠ¨åˆ°å®ƒä»¬ä¹‹åçš„ç¬¬ä¸€æ¡è¯­å¥ã€‚

::: code-group

```c [breakï¼šæå‰ç»“æŸå¾ªç¯]
#include <stdio.h>

int main(void) {
  int x;
  while (scanf("%d", &x) == 1) {
    if (x == 0) {
      break;
    }
    printf("%d\n", x);
  }
  puts("done");
  return 0;
}
```

:::

`break` çš„ç”Ÿæ•ˆèŒƒå›´éœ€è¦ç‰¹åˆ«æ³¨æ„ï¼šå®ƒåªä½œç”¨äºç¦»å®ƒæœ€è¿‘çš„é‚£ä¸€å±‚ `switch` æˆ–å¾ªç¯ã€‚

::: code-group

```c [âš ï¸ break åªç»“æŸ switchï¼Œä¸ä¼šç»“æŸå¤–å±‚å¾ªç¯]
#include <stdio.h>

int main(void) {
  for (int i = 0; i < 3; i++) {
    int cmd = i;
    switch (cmd) {
      case 0:
        puts("cmd 0");
        break;
      default:
        puts("other");
        break;
    }
    puts("still in loop");
  }
  return 0;
}
```

:::

## 4. ğŸ¤” continue è¯­å¥çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿå®ƒå¦‚ä½•å½±å“å¾ªç¯æ‰§è¡Œï¼Ÿ

`continue` çš„ä½œç”¨æ˜¯ç»“æŸæœ¬æ¬¡è¿­ä»£ï¼Œç›´æ¥è¿›å…¥ä¸‹ä¸€æ¬¡è¿­ä»£ã€‚

éœ€è¦æ³¨æ„çš„æ˜¯ï¼šå®ƒåªå¯¹å¾ªç¯æœ‰æ•ˆï¼Œå¯¹ `switch` æ— æ„ä¹‰ã€‚

åœ¨ä¸åŒå¾ªç¯ä¸­ï¼Œ`continue` çš„è¡Œä¸ºç»†èŠ‚ç•¥æœ‰å·®å¼‚ï¼š

- `for`ï¼šæ‰§è¡Œ `continue` åï¼Œä¼šå…ˆæ‰§è¡Œ `step`ï¼Œå†åˆ¤æ–­ `condition`ã€‚
- `while`ã€`do-while`ï¼šæ‰§è¡Œ `continue` åï¼Œä¼šç›´æ¥å»åˆ¤æ–­å¾ªç¯æ¡ä»¶ã€‚

::: code-group

```c [continueï¼šè¿‡æ»¤æ‰ä¸éœ€è¦å¤„ç†çš„å…ƒç´ ]
#include <stdio.h>

int main(void) {
  for (int i = 1; i <= 10; i++) {
    if (i % 2 == 1) {
      continue;
    }
    printf("%d\n", i);
  }
  return 0;
}
```

```c [âš ï¸ continue åœ¨ for ä¸­ä¼šæ‰§è¡Œ step]
#include <stdio.h>

int main(void) {
  for (int i = 0; i < 3; i++) {
    if (i == 1) {
      continue;
    }
    printf("i=%d\n", i);
  }
  return 0;
}
```

:::

## 5. ğŸ†š break vs continueï¼šè¡Œä¸ºå’Œä½¿ç”¨åœºæ™¯æœ‰ä½•æœ¬è´¨åŒºåˆ«ï¼Ÿ

å®ƒä»¬æœ€å¤§çš„åŒºåˆ«æ˜¯æ§åˆ¶æµçš„ç›®æ ‡ä¸åŒï¼š`break` æ˜¯â€œç¦»å¼€å½“å‰ç»“æ„â€ï¼Œ`continue` æ˜¯â€œå¼€å§‹ä¸‹ä¸€è½®â€ã€‚

| ç‰¹æ€§ | `break` | `continue` |
| --- | --- | --- |
| ä½œç”¨å¯¹è±¡ | å¾ªç¯ä¸ `switch` | ä»…å¾ªç¯ |
| å¯¹å½“å‰è¿­ä»£çš„å½±å“ | ç›´æ¥ç»“æŸæ•´ä¸ªå¾ªç¯æˆ– `switch` | ç»“æŸæœ¬æ¬¡è¿­ä»£ï¼Œè¿›å…¥ä¸‹ä¸€æ¬¡ |
| å¸¸è§ç”¨é€” | æ‰¾åˆ°ç›®æ ‡åæå‰é€€å‡ºï¼Œé‡åˆ°ä¸å¯æ¢å¤é”™è¯¯é€€å‡º | è¿‡æ»¤æ— æ•ˆè¾“å…¥ï¼Œè·³è¿‡ä¸éœ€è¦å¤„ç†çš„åˆ†æ”¯ |
| å¸¸è§é£é™© | åµŒå¥—å±‚çº§å¤šæ—¶éš¾è¿½è¸ªï¼Œå®¹æ˜“è¯¯ä»¥ä¸ºè·³å‡ºå¤šå±‚ | å¿˜è®°æ‰§è¡Œå¿…è¦çš„æ”¶å°¾é€»è¾‘ï¼Œå¯¼è‡´çŠ¶æ€ä¸ä¸€è‡´ |

ç®€å•ç»éªŒï¼š

- æƒ³è¡¨è¾¾â€œåˆ°æ­¤ä¸ºæ­¢ï¼Œä¸å†å¾ªç¯â€ï¼Œç”¨ `break`ã€‚
- æƒ³è¡¨è¾¾â€œè¿™è½®ä¸å¤„ç†ï¼Œä¸‹ä¸€è½®å†è¯´â€ï¼Œç”¨ `continue`ã€‚

## 6. ğŸ¤” åœ¨åµŒå¥—å¾ªç¯ä¸­ï¼Œbreak å’Œ continue ä¼šä½œç”¨äºå“ªä¸€å±‚ï¼Ÿ

åœ¨åµŒå¥—å¾ªç¯ä¸­ï¼Œ`break` ä¸ `continue` éƒ½åªä½œç”¨äºæœ€å†…å±‚å¾ªç¯ã€‚

::: code-group

```c [breakï¼šåªè·³å‡ºå†…å±‚å¾ªç¯]
#include <stdio.h>

int main(void) {
  for (int i = 0; i < 2; i++) {
    for (int j = 0; j < 3; j++) {
      if (j == 1) {
        break;
      }
      printf("i=%d j=%d\n", i, j);
    }
    puts("end of inner");
  }
  return 0;
}
```

```c [continueï¼šåªå½±å“å†…å±‚æœ¬æ¬¡è¿­ä»£]
#include <stdio.h>

int main(void) {
  for (int i = 0; i < 2; i++) {
    for (int j = 0; j < 3; j++) {
      if (j == 1) {
        continue;
      }
      printf("i=%d j=%d\n", i, j);
    }
  }
  return 0;
}
```

:::

å¦‚æœä½ éœ€è¦æ§åˆ¶å¤–å±‚å¾ªç¯ï¼Œé€šå¸¸æ„å‘³ç€è¦æ¢ä¸€ç§å†™æ³•ï¼Œè€Œä¸æ˜¯åœ¨å†…å±‚å¼ºè¡Œå †æ›´å¤š `break`ã€‚

## 7. ğŸ¤” å¦‚ä½•è·³å‡ºå¤šå±‚åµŒå¥—å¾ªç¯ï¼Ÿæœ‰å“ªäº›æ›¿ä»£æ–¹æ¡ˆï¼Ÿ

C è¯­è¨€æ²¡æœ‰â€œå¸¦æ ‡ç­¾çš„ breakâ€ã€‚è¦è·³å‡ºå¤šå±‚å¾ªç¯ï¼Œå¸¸ç”¨æ–¹æ¡ˆæœ‰ä»¥ä¸‹å‡ ç§ï¼ŒæŒ‰å¯è¯»æ€§ä»é«˜åˆ°ä½æ’åˆ—ã€‚

::: code-group

```c [âœ… æ–¹æ¡ˆä¸€ï¼šæŠ½å‡½æ•°ï¼Œä½¿ç”¨ return]
#include <stdio.h>

static int find_pair(void) {
  for (int i = 0; i < 3; i++) {
    for (int j = 0; j < 3; j++) {
      if (i + j == 3) {
        printf("hit i=%d j=%d\n", i, j);
        return 1;
      }
    }
  }
  return 0;
}

int main(void) {
  (void)find_pair();
  return 0;
}
```

```c [âœ… æ–¹æ¡ˆäºŒï¼šä½¿ç”¨æ ‡å¿—ä½ï¼Œå¤–å±‚åˆ¤æ–­å break]
#include <stdio.h>

int main(void) {
  int found = 0;

  for (int i = 0; i < 3 && !found; i++) {
    for (int j = 0; j < 3; j++) {
      if (i + j == 3) {
        printf("hit i=%d j=%d\n", i, j);
        found = 1;
        break;
      }
    }
  }
  return 0;
}
```

```c [âš ï¸ æ–¹æ¡ˆä¸‰ï¼šgoto è·³åˆ°ç»Ÿä¸€å‡ºå£]
#include <stdio.h>

int main(void) {
  for (int i = 0; i < 3; i++) {
    for (int j = 0; j < 3; j++) {
      if (i + j == 3) {
        printf("hit i=%d j=%d\n", i, j);
        goto done;
      }
    }
  }

done:
  puts("done");
  return 0;
}
```

:::

å¦‚æœå¾ªç¯é‡Œæœ‰èµ„æºé‡Šæ”¾ã€çŠ¶æ€å›æ»šç­‰æ”¶å°¾é€»è¾‘ï¼Œå»ºè®®ç”¨â€œç»Ÿä¸€å‡ºå£â€çš„æ–¹å¼ç»„ç»‡ï¼Œä¾‹å¦‚ä¸Šä¸€ç§ `goto done`ï¼Œæˆ–è€…æŠŠèµ„æºç®¡ç†å°è£…æˆå‡½æ•°ï¼Œé¿å…åœ¨å¤šä¸ª `break` åˆ†æ”¯é‡Œæ¼æ‰æ¸…ç†ã€‚

## 8. ğŸ¤” åœ¨ switch è¯­å¥ä¸­ä½¿ç”¨ break çš„å¿…è¦æ€§æ˜¯ä»€ä¹ˆï¼Ÿ

åœ¨ `switch` ä¸­ï¼Œ`break` çš„æ„ä¹‰æ˜¯é˜»æ­¢ç©¿é€ã€‚

`switch` çš„æ‰§è¡Œæ–¹å¼æ˜¯ï¼šä»å‘½ä¸­çš„ `case` å¼€å§‹é¡ºåºæ‰§è¡Œï¼Œç›´åˆ°é‡åˆ° `break`ã€`return` æˆ–ç»“æ„ç»“æŸã€‚

::: code-group

```c [âš ï¸ å¿˜å†™ break ä¼šç©¿é€]
#include <stdio.h>

int main(void) {
  int level = 2;
  switch (level) {
    case 1:
      puts("level 1");
      break;
    case 2:
      puts("level 2");
      /* âŒ å¿˜è®° breakï¼Œä¼šç»§ç»­æ‰§è¡Œ case 3 */
    case 3:
      puts("level 3");
      break;
    default:
      puts("unknown");
      break;
  }
  return 0;
}
```

```c [âœ… æœ‰æ„ç©¿é€æ—¶æ˜¾å¼æ ‡æ³¨]
#include <stdio.h>

int main(void) {
  int level = 3;
  switch (level) {
    case 3:
      puts("high");
      /* fall through */
    case 2:
      puts("mid");
      /* fall through */
    case 1:
      puts("low");
      break;
    default:
      puts("unknown");
      break;
  }
  return 0;
}
```

:::

ç»éªŒä¸Šï¼Œé™¤éä½ æ˜ç¡®éœ€è¦ç©¿é€ï¼Œå¦åˆ™æ¯ä¸ª `case` éƒ½å†™ `break` ä¼šæ›´å®‰å…¨ã€‚

## 9. ğŸ¤” æ»¥ç”¨ break æˆ– continue ä¼šå¯¼è‡´ä»€ä¹ˆé—®é¢˜ï¼Ÿ

`break` ä¸ `continue` çš„é—®é¢˜é€šå¸¸ä¸æ˜¯â€œè¯­æ³•é”™è¯¯â€ï¼Œè€Œæ˜¯â€œå¯è¯»æ€§ä¸æ­£ç¡®æ€§é£é™©â€ã€‚å¸¸è§é—®é¢˜åŒ…æ‹¬ï¼š

1. æ§åˆ¶æµåˆ†å‰è¿‡å¤šï¼Œè¯»è€…éœ€è¦åœ¨è„‘ä¸­æ¨¡æ‹Ÿæ‰§è¡Œè·¯å¾„ã€‚
2. å…³é”®é€»è¾‘è¢« `continue` è·³è¿‡ï¼Œå¯¼è‡´çŠ¶æ€ä¸ä¸€è‡´ã€‚
3. åµŒå¥—ç»“æ„é‡Œè¯¯åˆ¤ä½œç”¨å±‚çº§ï¼Œä¾‹å¦‚ä»¥ä¸º `break` ä¼šè·³å‡ºå¤šå±‚ã€‚

::: code-group

```c [âš ï¸ continue è®©å¿…è¦é€»è¾‘è¢«è·³è¿‡]
#include <stdio.h>

int main(void) {
  int count = 0;
  for (int i = 0; i < 5; i++) {
    if (i == 2) {
      continue;
    }
    count++;
  }
  printf("count=%d\n", count);
  return 0;
}
```

```c [âœ… ç”¨æ›´æ¸…æ™°çš„æ¡ä»¶ç»„ç»‡ï¼Œå‡å°‘è·³è½¬]
#include <stdio.h>

int main(void) {
  int count = 0;
  for (int i = 0; i < 5; i++) {
    if (i != 2) {
      count++;
    }
  }
  printf("count=%d\n", count);
  return 0;
}
```

:::

å¦‚æœä½ å‘ç°ä¸€ä¸ªå¾ªç¯é‡Œå‡ºç°å¤šä¸ª `break` å’Œå¤šä¸ª `continue`ï¼Œå»ºè®®ä¼˜å…ˆå°è¯•è¿™ä¸¤ç§é‡æ„ï¼š

- æå‰è¿”å›å¼è¿‡æ»¤ï¼Œä½†æŠŠçŠ¶æ€æ¨è¿›ä¸æ”¶å°¾é€»è¾‘é›†ä¸­åˆ°ä¸€ä¸ªåœ°æ–¹ã€‚
- æŠŠå¤æ‚å¾ªç¯ä½“æ‹†æˆå°å‡½æ•°ï¼Œè®©ä¸»å¾ªç¯åªä¿ç•™â€œéå†â€ä¸â€œé€€å‡ºæ¡ä»¶â€ã€‚

## 10. ğŸ”— å¼•ç”¨

- [cppreferenceï¼šbreak statement][1]
- [cppreferenceï¼šcontinue statement][2]
- [cppreferenceï¼šswitch statement ä¸ fall-through][3]

[1]: https://en.cppreference.com/w/c/language/break
[2]: https://en.cppreference.com/w/c/language/continue
[3]: https://en.cppreference.com/w/c/language/switch
